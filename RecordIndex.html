<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="./layui/css/layui.css" rel="stylesheet">
</head>
<body style="padding: 10px 10px">
    <fieldset class="layui-elem-field layui-field-title">
        <legend>档案录入</legend>
    </fieldset>
    <form class="layui-form" action="" lay-filter="example">
        <div class="layui-form-item">
            <div class="layui-row">
                <div class="layui-col-md6">
                    <label class="layui-form-label">行社编号</label>
                    <div class="layui-input-block">
                        <input type="text" name="RecordManagerDepartment" autocomplete="off" placeholder="行社编号" class="layui-input" lay-verify="required">
                    </div>
                </div>

                <div class="layui-col-md6">
                    <label class="layui-form-label">客户经理</label>
                    <div class="layui-input-block">
                        <input type="text" name="RecordManager" lay-verify="required" placeholder="归属客户经理" autocomplete="off" class="layui-input">
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-row">
                <div class="layui-col-md6">
                    <label class="layui-form-label">授信到期日</label>
                    <div class="layui-input-block">
                        <input type="text" name="CreditDueDate" id="CreditDueDate" autocomplete="off" placeholder="授信到期日" class="layui-input datetime" lay-verify="required">
                    </div>
                </div>

                <div class="layui-col-md6">
                    <label class="layui-form-label">客户姓名</label>
                    <div class="layui-input-block">
                        <input type="text" name="RecordUserName" autocomplete="off" placeholder="客户姓名" class="layui-input" lay-verify="required">
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-row">
                <div class="layui-col-md6">
                    <label class="layui-form-label">客户号</label>
                    <div class="layui-input-block">
                        <input type="text" name="RecordUserCode" lay-verify="required" placeholder="客户号" autocomplete="off" class="layui-input">
                    </div>
                </div>

                <div class="layui-col-md6">
                    <label class="layui-form-label">档案所属类别</label>
                    <div class="layui-input-block">
                        <input type="radio" name="RecordType" value="0" title="个人" checked="">
                        <input type="radio" name="RecordType" value="1" title="企业">
                    </div>
                </div>
            </div>
        </div>

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>文件清单添加</legend>
        </fieldset>
        <div class="layui-collapse" lay-filter="test" id="test">
            <div class="layui-colla-item">
                <h2 class="layui-colla-title">个人信贷类</h2>
                <div class="layui-colla-content" id="PerPerson">
                    <div class="layui-form-item">
                        <div class="layui-input-inline">
                            <input type="checkbox" name="like[write]" title="测试">
                        </div>
                        <div class="layui-input-inline">
                            <input type="text" name="Date" id="Date" placeholder="到期日" class="layui-input datetime">
                        </div>
                        <div class="layui-input-inline">
                            <div class="layui-row">
                                <div class="layui-col-md3">
                                    <button type="button" class="layui-btn layui-btn-primary num_action_sub">-</button>
                                </div>
                                <div class="layui-col-md6">
                                    <input type="text" value="0" name="write" class="layui-input num">
                                </div>
                                <div class="layui-col-md3">
                                    <button type="button" class="layui-btn layui-btn-primary num_action_add">+</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-inline">
                            <input type="checkbox" name="like[read]" title="测试2">
                        </div>
                        <div class="layui-input-inline">
                            <input type="text" name="Date2" id="Date2" placeholder="到期日" class="layui-input datetime">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-input-inline">
                            <input type="checkbox" name="like[edit]" title="测试3">
                        </div>
                        <div class="layui-input-inline">
                            <input type="text" name="Date3" id="Date3" placeholder="到期日" class="layui-input datetime">
                        </div>
                    </div>

                    <div class="test">

                    </div>

                    <button id="add" type="button" name="add" class="layui-btn add">添加其他</button>
                </div>
            </div>

            <div class="layui-colla-item">
                <h2 class="layui-colla-title">企业信贷类</h2>
                <div class="layui-colla-content" id="vivo">
                    <div class="layui-form-item">
                        <div class="layui-input-inline">
                            <input type="checkbox" name="dislike[read]" title="身份证">
                        </div>
                        <div class="layui-input-inline">
                            <input type="text" name="dislike_1" id="dislike_1" placeholder="到期日" class="layui-input datetime">
                        </div>
                    </div>

                    <div class="test">

                    </div>

                    <button type="button" class="layui-btn add">添加其他</button>
                </div>
            </div>
            <div class="layui-colla-item">
                <h2 class="layui-colla-title">单证类</h2>
                <div class="layui-colla-content" id="oppo">
                    <div class="layui-form-item">
                        <div class="layui-input-inline">
                            <input type="checkbox" name="test[read]" title="身份证">
                        </div>
                        <div class="layui-input-inline">
                            <input type="text" name="test_1" id="test_1" placeholder="到期日" class="layui-input datetime">
                        </div>
                    </div>
                    <div class="test">

                    </div>

                    <button type="button" class="layui-btn add">添加其他</button>
                </div>
            </div>
        </div>

        <div class="layui-form-item" style="margin-top: 10px;text-align: right">
            <div class="layui-input-block">
                <button type="button" class="layui-btn layui-btn-normal" id="LAY-component-form-getval">取值</button>
                <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
    <script src="layui/layui.js" type="text/javascript"></script>
    <script>
        layui.use(['form', 'laydate', 'element', 'layer'], function () {
           var form = layui.form
               ,laydate = layui.laydate
               ,element = layui.element
               ,$ = layui.jquery
               ,layer = layui.layer;
            // laydate.render({
            //     elem: '#CreditDueDate',
            //     elem: '#Date',
            //     elem: '#Date2',
            //     elem: '#Date3'
            // });

            $('#test').append("<div class=\"layui-colla-item\">\n" +
                "                <h2 class=\"layui-colla-title\">测试类</h2>\n" +
                "                <div class=\"layui-colla-content\">\n" +
                "                    <div class=\"layui-form-item\">\n" +
                "                        <div class=\"layui-input-inline\">\n" +
                "                            <input type=\"checkbox\" name=\"test1[read]\" title=\"身份证\">\n" +
                "                        </div>\n" +
                "                        <div class=\"layui-input-inline\">\n" +
                "                            <input type=\"text\" name=\"tests_1\" id=\"tests_1\" placeholder=\"到期日\" class=\"layui-input datetime\">\n" +
                "                        </div>\n" +
                "                    </div>\n" +
                "                </div>\n" +
                "            </div>");

            element.render('collapse');
            form.render();

            lay('.datetime').each(function() {
                laydate.render({
                    elem : this,
                    trigger : 'click'
                });
            });

            layui.$('.num_action_sub').on('click',function () {
               if($(this).siblings('.num').val()=='0')
               {

               }
               else
               {
                   $(this).siblings('.num').val(parseInt($(this).siblings('.num').val()) - 1);
               }
            });

            layui.$('.num_action_add').on('click',function () {
                // layer.msg($(this).siblings('.num').val());
                $(this).siblings('.num').val(parseInt($(this).siblings('.num').val()) + 1);
            });

            layui.$('.add').on('click', function(){
                var counter = 1;
                var name = $(this).parent().attr('id') + '_' + counter;

                // console.log($(name).length);
                // layer.msg($(name).length);
                while ($("#" + name).length > 0)
                {
                    counter += 1;
                    name = $(this).parent().attr('id') + '_' + counter;
                }

                $(this).prev('.test').append('<div class="layui-form-item">\n' +
                    '                        <div class="layui-input-inline">\n' +
                    '                            <input type="text" name="'+ name +'" id="'+ name +'" placeholder="证件名称" class="layui-input">\n' +
                    '                        </div>\n' +
                    '                        <div class="layui-input-inline">\n' +
                    '                            <input type="text" name="'+ name +'_date" placeholder="到期日" class="layui-input datetime">\n' +
                    '                        </div>\n' +
                    '                    </div>');
                // layer.msg($(this).parent().attr('class'));
                element.render('collapse');
                form.render();

                lay('.datetime').each(function() {
                    laydate.render({
                        elem : this,
                        trigger : 'click'
                    });
                });
            });

            //表单取值
            layui.$('#LAY-component-form-getval').on('click', function(){
                var data = form.val('example');
                alert(JSON.stringify(data));
            });

            form.on('submit(formDemo)', function(data){
                console.log(data);
                layer.msg(JSON.stringify(data.field));
                return false;
            });
        });
    </script>
</body>
</html>